<article class="admin-container">

    <section class="admin-leftside">
        <h1 class="profile">Welcome to the admin page!</h1>

        <!-- Profile Information Container -->
        <section class="profile-info">
            <p class="profileInfo">Username: {{user.username}}</p>
            <p class="profileInfo">First Name: {{user.firstName}}</p>
            <p class="profileInfo">Last Name: {{user.lastName}}</p>
        </section>

        <!-- PERSONAL COMMENT:
        ALL RSVP FIELDS:
            comment: comment,
            meetUpTime: meetUpTime,
            restaurantId: restaurantId,
            userId: userId,
            usersAttending: [userId]
        -->
        {{#if message}}
        <p class="deletedReview">{{message}}</p>
        {{/if}}

        <!-- All Reviews! -->
        <section class="profSection">
            <section class="profile-myReviews">
                <h2 class="profile">All User Reviews:</h2>
                <!--
                {{#if message}}
                    <p class="deletedReview">{{message}}</p>
                {{/if}}
                -->
                {{#if reviewDeleted}}
                    <details open>
                {{else}}
                    <details close>
                {{/if}}
                    <summary class="caret-summary">
                        <p><span class="caret"></span> All Reviews</p>
                    </summary>
                    <ul>
                        {{#each user.reviews}}
                            <li class="reviewLi">
                                <div class="buttonGroup">
                                    <form action="/admin/delete" method="POST" class="deleteReveiwForm">
                                        <input type="hidden" name="reviewId" value="{{this._id}}">
                                        <input type="hidden" name="userId" value="{{this.userId}}">
                                        <button type="submit" class="EditandDeleteButton">Delete</button>
                                    </form>
                                </div>
                                <div class="reviewInfo">
                                    {{#if this.userId}}
                                        <p><span class="reviewSpan">This review was written by:</span> {{this.username}}</p>
                                    {{/if}}
                                    {{#if this.menuItemName}}
                                        <p><span class="reviewSpan">{{this.restaurantName}}:</span> <span class="revItalic">{{this.menuItemName}}</span></p>
                                    {{else}}
                                        <p><span class="reviewSpan">{{this.restaurantName}}</span></p>
                                    {{/if}}
                                    <p><span class="reviewSpan">Rating:</span> {{this.rating}}</p>
                                    <p><span class="reviewSpan">Wait Time:</span> {{this.waitTime}}</p>
                                    <p><span class="reviewSpan">Review:</span> {{this.review}}</p>
                                </div>
                            </li>
                        {{/each}}
                    </ul>
                </details>
            </section>
        </section>

        <!-- All Users List! -->
        <section class="profile-myUsers">
            <h2 class="profile">All Users:</h2>
            <details close>
                <summary class="caret-summary">
                    <p><span class="caret"></span> All Users</p>
                </summary>
                <ul>
                    {{#each allUsers}}
                        <li class="reviewLi">
                            <p><span class="reviewSpan">Username:</span> {{this.username}}</p>
                            <p><span class="reviewSpan">Name:</span> {{this.firstName}}</p>
                            {{#if this.isAdmin}}
                                <p><span class="reviewSpan">Role: </span>Admin</p>
                            {{else}}
                                <p><span class="reviewSpan">Role: </span>Regular User</p>
                            {{/if}}
                        </li>
                    {{/each}}
                </ul>
            </details>
        </section>

        <!-- Restaurant List! -->
        <section class="profile-myRestaurants">
            <h2 class="profile">All Restaurants:</h2>
            {{#if restaurantDeleted}}
                <details open>
            {{else}}
                <details close>
            {{/if}}
                <summary class="caret-summary">
                    <p><span class="caret"></span> All Restaurants</p>
                </summary>
                <ul>
                    {{#each allRestaurants}}
                        <li class="reviewLi">
                            <div class="buttonGroup">
                                <!-- Delete Restaurant Button -->
                                <form action="/admin/restaurant/delete" method="POST" class="deleteRestaurantForm">
                                    <input type="hidden" name="restaurantId" value="{{this._id}}">
                                    <button type="submit" class="EditandDeleteButton">Delete</button>
                                </form>
                                <!-- Edit Restaurant Button -->
                                <form action="/admin/restaurant/edit/{{this._id}}" method="GET" class="editRestaurantForm">
                                    <input type="hidden" name="restaurantId" value="{{this._id}}">
                                    <button type="submit" class="EditandDeleteButton">Edit</button>
                                </form>
                            </div>
                            <div class="reviewInfo">
                                <p><span class="reviewSpan">Name:</span> {{this.name}}</p>
                                <p><span class="reviewSpan">Location:</span> {{this.location}}</p>
                            </div>
                        </li>
                    {{/each}}
                </ul>
            </details>
        </section>
    </section>

    <section class="admin-rightside">
        {{#if editingRestaurant}}
        <!-- EDIT restaurant form -->
            <section class="profSection">
                <section class="profile-myRSVPposts">
                    <h2 class="profile">Edit Restaurant:</h2>
                    <!-- Form to edit a restaurant -->
                    <form action="/admin/restaurant/edit" method="POST" id="restaurant-edit-form" class="restaurant-form">
                        <!-- Override the POST method to a PUT request -->
                        <input type="hidden" name="_method" value="PUT">
                        <div class="adminBox">
                            <!-- Restaurant id -->
                            <input type="hidden" name="restaurantId" value="{{restaurant._id}}">
                            <!-- Name -->
                            <div class="loginForm">
                                <label for="restaurant-name">Name:</label> 
                                <input type="text" id="restaurant-name" name="name" placeholder="Name..." value="{{restaurant.name}}" class="login-input">
                            </div>

                            <!-- Location -->
                            <div class="loginForm">
                                <label for="restaurant-location">Location:</label>
                                <input type="text" id="restaurant-location" name="location" placeholder="Location..." value="{{restaurant.location}}" class="login-input">
                            </div>

                            <!-- Types of Food -->
                            <div class="loginForm">
                                <label for="restaurant-typeOfFood">Types of food:</label>
                                <input type="text" id="restaurant-typeOfFood" name="typeOfFood" placeholder="Types of food..." value="{{restaurant.typeOfFood}}" class="login-input">
                            </div>

                            <!-- Hours of Operation -->
                            <div class="restaurantHoursOfOperation">
                                <fieldset>
                                    <div class="hoursOfOperation-section">
                                        <legend>Hours of operation:</legend>
                                        {{#each days}}
                                            <label for="restaurant-hoursOfOperation-{{this}}">{{this}}:</label>
                                            <input type="text" id="restaurant-hoursOfOperation-{{this}}" name="hoursOfOperation[{{this}}]" placeholder="ex. '8:00AM - 5:00PM' or 'closed'" value="{{lookup ../restaurant.hoursOfOperation this}}" class="login-input">
                                        {{/each}}
                                    </div>
                                </fieldset>
                            </div>

                            <!-- Image URL -->
                            <div class="loginForm">
                                <label for="restaurant-imageURL">Image URL:</label>
                                <input type="text" id="restaurant-imageURL" name="imageURL" placeholder="Image URL..." value="{{restaurant.imageURL}}" class="login-input">
                            </div>

                            <!-- Dietary Restrictions -->
                            <div class="loginForm">
                                <label for="restaurant-dietaryRestrictions">Dietary Restrictions:</label>
                                <div class="restaurant-checkbox">
                                    <!-- Vegetarian -->
                                    {{#if dietaryCheckBox.Vegetarian}}
                                    <input type="checkbox" checked id="dietaryRestrictions-vegetarian" name="dietaryRestrictions" value="Vegetarian">
                                    {{else}}
                                    <input type="checkbox" id="dietaryRestrictions-vegetarian" name="dietaryRestrictions" value="Vegetarian">
                                    {{/if}}
                                    <label for="dietaryRestrictions-vegetarian">Vegetarian</label>
                                    <!-- Nut-free -->
                                    {{#if dietaryCheckBox.Nut-free}}
                                    <input type="checkbox" checked id="dietaryRestrictions-nut-free" name="dietaryRestrictions" value="Nut-free">
                                    {{else}}
                                    <input type="checkbox" id="dietaryRestrictions-nut-free" name="dietaryRestrictions" value="Nut-free">
                                    {{/if}}
                                    <label for="dietaryRestrictions-nut-free">Nut-free</label>
                                    <!-- Vegan -->
                                    {{#if dietaryCheckBox.Vegan}}
                                    <input type="checkbox" checked id="dietaryRestrictions-vegan" name="dietaryRestrictions" value="Vegan">
                                    {{else}}
                                    <input type="checkbox" id="dietaryRestrictions-vegan" name="dietaryRestrictions" value="Vegan">
                                    {{/if}}
                                    <label for="dietaryRestrictions-vegan">Vegan</label>
                                    <!-- Dairy-free -->
                                    {{#if dietaryCheckBox.Dairy-free}}
                                    <input type="checkbox" checked id="dietaryRestrictions-dairy-free" name="dietaryRestrictions" value="Dairy-free">
                                    {{else}}
                                    <input type="checkbox" id="dietaryRestrictions-dairy-free" name="dietaryRestrictions" value="Dairy-free">
                                    {{/if}}
                                    <label for="dietaryRestrictions-dairy-free">Dairy-free</label>
                                    <!-- Gluten-free -->
                                    {{#if dietaryCheckBox.Gluten-free}}
                                    <input type="checkbox" checked id="dietaryRestrictions-gluten-free" name="dietaryRestrictions" value="Gluten-free">
                                    {{else}}
                                    <input type="checkbox" id="dietaryRestrictions-gluten-free" name="dietaryRestrictions" value="Gluten-free">
                                    {{/if}}
                                    <label for="dietaryRestrictions-gluten-free">Gluten-free</label>
                                </div>
                            </div>
                            <!--
                            <div class="loginForm">
                                <label for="restaurant-dietaryRestrictions">Dietary restrictions:</label>
                                <input type="text" id="restaurant-dietaryRestrictions" name="dietaryRestrictions" placeholder="Dietary restrictions..." value="{{restaurant.dietaryRestrictions}}" class="login-input">
                            </div>
                            -->

                            <!-- Submit Button -->
                            <button id="restaurant-button" type="submit" class="loginButton">Update</button>
                        </div>
                    </form>

                    <ul id="restaurant-errors" class="error-list">
                        {{#if hasErrors}}
                            {{#each errors}}
                                <li>{{this}}</li>
                            {{/each}}
                        {{/if}}
                    </ul>
                </section>
            </section>
        {{else}}
            <!-- CREATE restaurant form -->
            <section class="profSection">
                <section class="profile-myRSVPposts">
                    <h2 class="profile">Create a New Restaurant:</h2>
                    <!-- Form to create a restaurant -->
                    <form action="/admin/restaurant" method="POST" id="restaurant-create-form" class="restaurant-form">
                        <div class="adminBox">
                            <!-- Name -->
                            <div class="loginForm">
                                <label for="restaurant-name">Name:</label> 
                                <input type="text" id="restaurant-name" name="name" placeholder="Name..." value="{{name}}" class="login-input">
                            </div>

                            <!-- Location -->
                            <div class="loginForm">
                                <label for="restaurant-location">Location:</label>
                                <input type="text" id="restaurant-location" name="location" placeholder="Location..." value="{{location}}" class="login-input">
                            </div>

                            <!-- Types of Food -->
                            <div class="loginForm">
                                <label for="restaurant-typeOfFood">Types of food:</label>
                                <input type="text" id="restaurant-typeOfFood" name="typeOfFood" placeholder="Types of food..." value="{{typeOfFood}}" class="login-input">
                            </div>

                            <!-- Hours of Operation -->
                            <div class="restaurantHoursOfOperation">
                                <fieldset>
                                    <div class="hoursOfOperation-section">
                                        <legend>Hours of operation:</legend>
                                        {{#each days}}
                                            <label for="restaurant-hoursOfOperation-{{this}}">{{this}}:</label>
                                            <input type="text" id="restaurant-hoursOfOperation-{{this}}" name="hoursOfOperation[{{this}}]" placeholder="ex. '8:00AM - 5:00PM' or 'closed'" value="{{lookup ../hoursOfOperation this}}" class="login-input">
                                        {{/each}}
                                    </div>
                                </fieldset>
                            </div>

                            <!-- Image URL -->
                            <div class="loginForm">
                                <label for="restaurant-imageURL">Image URL:</label>
                                <input type="text" id="restaurant-imageURL" name="imageURL" placeholder="Image URL..." value="{{imageURL}}" class="login-input">
                            </div>

                            <!-- Dietary Restrictions -->
                            <div class="loginForm">
                                <label for="restaurant-dietaryRestrictions">Dietary Restrictions:</label>
                                <div class="restaurant-checkbox">
                                    <!-- Vegetarian -->
                                    {{#if dietaryCheckBox.Vegetarian}}
                                    <input type="checkbox" checked id="dietaryRestrictions-vegetarian" name="dietaryRestrictions" value="Vegetarian">
                                    {{else}}
                                    <input type="checkbox" id="dietaryRestrictions-vegetarian" name="dietaryRestrictions" value="Vegetarian">
                                    {{/if}}
                                    <label for="dietaryRestrictions-vegetarian">Vegetarian</label>
                                    <!-- Nut-free -->
                                    {{#if dietaryCheckBox.Nut-free}}
                                    <input type="checkbox" checked id="dietaryRestrictions-nut-free" name="dietaryRestrictions" value="Nut-free">
                                    {{else}}
                                    <input type="checkbox" id="dietaryRestrictions-nut-free" name="dietaryRestrictions" value="Nut-free">
                                    {{/if}}
                                    <label for="dietaryRestrictions-nut-free">Nut-free</label>
                                    <!-- Vegan -->
                                    {{#if dietaryCheckBox.Vegan}}
                                    <input type="checkbox" checked id="dietaryRestrictions-vegan" name="dietaryRestrictions" value="Vegan">
                                    {{else}}
                                    <input type="checkbox" id="dietaryRestrictions-vegan" name="dietaryRestrictions" value="Vegan">
                                    {{/if}}
                                    <label for="dietaryRestrictions-vegan">Vegan</label>
                                    <!-- Dairy-free -->
                                    {{#if dietaryCheckBox.Dairy-free}}
                                    <input type="checkbox" checked id="dietaryRestrictions-dairy-free" name="dietaryRestrictions" value="Dairy-free">
                                    {{else}}
                                    <input type="checkbox" id="dietaryRestrictions-dairy-free" name="dietaryRestrictions" value="Dairy-free">
                                    {{/if}}
                                    <label for="dietaryRestrictions-dairy-free">Dairy-free</label>
                                    <!-- Gluten-free -->
                                    {{#if dietaryCheckBox.Gluten-free}}
                                    <input type="checkbox" checked id="dietaryRestrictions-gluten-free" name="dietaryRestrictions" value="Gluten-free">
                                    {{else}}
                                    <input type="checkbox" id="dietaryRestrictions-gluten-free" name="dietaryRestrictions" value="Gluten-free">
                                    {{/if}}
                                    <label for="dietaryRestrictions-gluten-free">Gluten-free</label>
                                </div>
                            </div>
                        
                            <!-- Dietary Restrictions -->
                            <!--
                            <div class="loginForm">
                                <label for="restaurant-dietaryRestrictions">Dietary restrictions:</label>
                                <input type="text" id="restaurant-dietaryRestrictions" name="dietaryRestrictions" placeholder="Dietary restrictions..." value="{{dietaryRestrictions}}" class="login-input">
                            </div>
                            -->

                            <!-- Submit Button -->
                            <button id="restaurant-button" type="submit" class="loginButton">Submit</button>
                        </div>
                    </form>

                    <ul id="restaurant-errors" class="error-list">
                        {{#if hasErrors}}
                            {{#each errors}}
                                <li>{{this}}</li>
                            {{/each}}
                        {{/if}}
                    </ul>
                </section>
            </section>
        {{/if}}
    </section>

</article>
